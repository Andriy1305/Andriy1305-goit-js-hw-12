{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const fetchPhotos = async (searchedQuery, page = 1) => {\n  const params = {\n    key: '48862284-111645087e0508ab98b21d672',\n    q: searchedQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15, // Встановлюємо кількість зображень на сторінку\n  };\n\n  try {\n    const response = await axios.get('https://pixabay.com/api/', { params });\n    return response.data;\n  } catch (error) {\n    throw new Error(error);\n  }\n};\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryContainer = document.querySelector(\".gallery\");\n\nif (!galleryContainer) {\n  console.error(\"Gallery container not found!\");\n}\n\nlet lightbox = new SimpleLightbox(\".gallery a\", { captionsData: \"alt\", captionDelay: 250 });\n\nexport const createGalleryCard = (imgInfo) => {\n  return `\n    <li class=\"gallery-item\">\n      <a href=\"${imgInfo.largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" width=\"360\" class=\"gallery-img\" loading=\"lazy\"/>\n      </a>\n      <ul class=\"gallery-info-list\">\n        <li><h3>Likes</h3><p>${imgInfo.likes}</p></li>\n        <li><h3>Views</h3><p>${imgInfo.views}</p></li>\n        <li><h3>Comments</h3><p>${imgInfo.comments}</p></li>\n        <li><h3>Downloads</h3><p>${imgInfo.downloads}</p></li>\n      </ul>\n    </li>`;\n};\n\n// Функція рендерингу галереї\nexport const renderGallery = (images) => {\n  if (!galleryContainer) return;\n\n  if (images.length === 0) {\n    console.warn(\"No images to render.\");\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n  const tempDiv = document.createElement(\"div\");\n\n  tempDiv.innerHTML = images.map(createGalleryCard).join(\"\");\n\n  while (tempDiv.firstChild) {\n    fragment.appendChild(tempDiv.firstChild);\n  }\n\n  galleryContainer.appendChild(fragment);\n  lightbox.refresh(); // Оновлення SimpleLightbox\n};\n\n// Функція очищення галереї\nexport const clearGallery = () => {\n  if (!galleryContainer) return;\n  galleryContainer.innerHTML = \"\";\n};\n","import iziToast from 'izitoast';\nimport { fetchPhotos } from './js/pixabay-api';\nimport { createGalleryCard, renderGallery, clearGallery } from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet searchQuery = '';\nlet currentPage = 1;\n\nconst formSubmit = async (event) => {\n  event.preventDefault();\n  const loader = document.querySelector('.loader-container');\n  loader.style.display = 'block';\n\n  searchQuery = event.currentTarget.elements.query.value.trim();\n  if (searchQuery === '') {\n    loader.style.display = 'none';\n    iziToast.error({\n      message: 'Please complete the form',\n      messageColor: '#fafafb',\n      icon: 'fas fa-keyboard',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      color: '#fafafb',\n    });\n    return;\n  }\n\n  try {\n    const data = await fetchPhotos(searchQuery, currentPage);\n    if (data.totalHits === 0) {\n      iziToast.error({\n        message: 'Sorry, no images match your query.',\n        messageColor: '#fafafb',\n        icon: 'far fa-file-image',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        color: '#fafafb',\n      });\n      return;\n    }\n\n    clearGallery(); // Очищаємо галерею\n    renderGallery(data.hits); // Відображаємо нові зображення\n\n    if (data.totalHits > currentPage * 15) {\n      loadMoreBtn.style.display = 'block'; // Показуємо кнопку \"Load More\"\n    } else {\n      loadMoreBtn.style.display = 'none'; // Сховуємо кнопку, якщо немає більше зображень\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong',\n      messageColor: '#fafafb',\n      icon: 'fas fa-exclamation-triangle',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      color: '#fafafb',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n\n  event.target.reset();\n};\n\nconst loadMoreImages = async () => {\n  currentPage += 1;\n  const loader = document.querySelector('.loader-container');\n  loader.style.display = 'block';\n\n  try {\n    const data = await fetchPhotos(searchQuery, currentPage);\n    renderGallery(data.hits);\n\n    if (data.totalHits <= currentPage * 15) {\n      loadMoreBtn.style.display = 'none'; // Сховуємо кнопку, якщо більше немає результатів\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: '#fafafb',\n        icon: 'far fa-file-image',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        color: '#fafafb',\n      });\n    }\n\n    const cardHeight = document.querySelector('.gallery-item')?.getBoundingClientRect().height || 0;\n    window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong',\n      messageColor: '#fafafb',\n      icon: 'fas fa-exclamation-triangle',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      color: '#fafafb',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n};\n\nform.addEventListener('submit', formSubmit);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n"],"names":["fetchPhotos","searchedQuery","page","params","axios","error","galleryContainer","lightbox","SimpleLightbox","createGalleryCard","imgInfo","renderGallery","images","fragment","tempDiv","clearGallery","form","loadMoreBtn","searchQuery","currentPage","formSubmit","event","loader","iziToast","data","loadMoreImages","cardHeight","_a"],"mappings":"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"}